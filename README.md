# üîû‚Äã Mortez365

## üìñ Index
[Phase 0](#phase-0)
   - [Team Members](#-team-members)
   - [Team Tools](#-team-tools)
   - [Entities](#-entities)
   - [Users](#-users)
   - [Permissions](#-permissions)
   - [Images](#-images)
   - [Graphics](#%EF%B8%8F-graphics)
   - [Complementary Technology](#-complementary-technology)
   - [Algorithm or Advanced Query](#-algorithm-or-advanced-query) <br>
   - [Navigation flow](#-navigation-flow)
---

## Phase 0

##  üòé Team Members
| Name                        | Email                             | GitHub Nick       |
| ---------                     | ----                               | ---------         |
| Vicente Navarro Raboso        | v.navarro.2021@alumnos.urjc.es     | [@vicentenavarro13](https://github.com/vicentenavarro13)  |
| Alberto Rold√°n Nieto          | a.roldan.2021@alumnos.urjc.es      | [@albertorolnie](https://github.com/albertorolnie)     |
| Jos√© Andr√©s Villagr√°n Robles  | ja.villagran.2021@alumnos.urjc.es  | [@josrob13](https://github.com/josrob13)          |
| Guillermo Romero Almaz√°n      | g.romero.2021@alumnos.urjc.es      | [@Guillalox](https://github.com/guillalox)         |
| √Ålvaro Pindado Casti√±eira     | a.pindado.2019@alumnos.urjc.es     | [@Alvaropin17](https://github.com/Alvaropin17)         |

___

## üß∞ Team Tools
For the implementation of the practice, we have coordinated our tasks using [Jira](https://daw-equipo10-23-24.atlassian.net/jira/software/projects/DAW10/boards/1).

To coordinate the implementation of the code and be able to work on it separately, we have used [GitHub](https://github.com/CodeURJC-DAW-2023-24/webapp10).

___

## üé∞ Entities
In our web application we find the following entities:
  - **Users**
  - **Championship**
  - **Events**
  - **Bets**
  - **Transactions**
  - **Wallet**
___

## üë± Users
In our web application we have the following users:
  - **Anonymous User**: user who accesses the application without logging in.
  - **Registered User**: user who has logged into the application after registration.
  - **Administrator**: user in charge of special functions in the application.

___

## üîì Permissions
In our web application we have the following permissions:
  - **Anonymous User**: user who can view the page and its content, but not participate in any bets.
  - **Registered User**: user who can view the page and its content, also participate in the available bets and be able to do transactions.
  - **Administrator**: user who can modify, add and delete any bet from the application and is able to delete a registered user


___

## üì∑ Images
In our web application we have the following types of images:
   - **User Profile Picture**: the picture which is shown in the profile of the users. This image will be upladed by the users.
   - **Football Matches Picture**: the picture which is shown in each football match on which users can bet.
   - **Auction Picture**: the picture that describes the main product of the auction (optional target).
   - **Games Picture**: the pictures inside a game that represents the different objects




___

## ‚ÜóÔ∏è Graphics
In our web application we have the following types of graphics:
   - **Bets Won Graph**: this graph will show the statistics of the bets won by users.
   - **Hot Roulette Numbers Graph**: this graph will show the numbers that have won the most bets in the roulette.
   - **Cold Roulette Numbers Graph**: This graph will represent the numbers that have come out the least recently in the roulette.



___

## üë®‚Äçüíª Complementary Technology
In our web application we use this complementary technology:
   - **Email sending**: third-party technology will be used to send e-mails to our users.
   - **PDF generator**: external technology will be used to generate betting and other tickets in PDF format.
   - **Websockets**: third-party libraries will be used to create real-time notifications.
   - **Roulette API**: we will use an external roulette API to implementate the roulette game.
   - **Slot Machine API**: we will use an external slot machine API to implementate the slot machine game.


___


## ü§ñ Algorithm or Advanced Query
In our web application we use this algorithms:
   - **Roulette Algorithm**: in order for users to play roulette correctly, an algorithm will be used to choose a random number out of the 36 that make up the roulette wheel.
   - **Horse Racing Algorithm**: the application will use an algorithm that simulates a horse racing, making one of all the competitors the winner.


___

## Navigation flow

![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/117302316/103b54c9-d31e-4179-9214-f3c308975ea5)


___

## Screenshots and information


- **Index**:
   This will be the main page. From here you will be able to sign in, sign up and access all our services.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/78827438-7ab4-4314-b6cb-12f59559771a)

- **Sign in**:
   Here you will be able to introduce your credentials and access our web as a registered user. This will allow you to enjoy most of our services.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/e6793fe1-fbea-4419-9c18-a119823edb4d)

- **Sign up**:
   Here you will be able to introduce your personal information in order to create a profile.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/5b76c7a5-e6dd-49ed-8e69-c50c52f8d7c2)

- **Betting page**:
   Here you will be able to select an event and place a bet with different choices.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/aa3a579f-2962-4947-86d3-f38e4ff44fa7)

- **Profile**:
   Here you can watch your profile information.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/117302316/47c6abd3-92bf-459a-ad14-1b08a9715039)

- **Wallet**:
   Here you deposit your money and watch your funds.
 ![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/117302316/14e061ad-5493-4b93-943d-f0ab6f847358)


- **Bets saved**:
   Here you can see the bets you've made.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/117302316/ad52078f-0800-4653-9b5f-7d91d96b26f0)
   
- **Roulette**:
  Here you can play the famous Roulette game.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/0236a646-f97c-4118-b940-b530f351a335)

- **Contact us**:
  This is a page where any user can contact a specialized support team and receive fast help about any issue related to our page or bets.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/3bed6ad1-5d49-401a-80f1-f8922e0bfd61)

- **Responsible game**:
  In this page you can read about safe betting and the risks of this type of practices. We advise any player to have a look at this page before playing.
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/152438c4-cdad-456b-94ea-e28b5bb3a025)

- **About us**:
  A page about the dev team and their contact information
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/9fe6d5bd-40d1-4eb9-9b4b-2ad3862e86cf)

- **Add events for admin**:
  A page where the admin user can add new events
![image](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/117302316/dc01f040-b72d-4f99-98e8-1aca089ea624)


___

## Class Diagram

![esquema clases daw](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/80198176/29429ab9-38a5-4560-9308-9dd0d0d18999)

___

___

## SQL Entities Diagram

![entitiesDiagram](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/145127838/a3091959-7355-4de6-a077-6550b7920e64)

___

___

## How to configure develop enviroment and the application 
## 1. Install Java Development Kit (JDK):

- Visit the Oracle JDK download page or use OpenJDK, an open-source alternative.
- Download the installer suitable for your operating system.
- Follow the installation instructions provided by the JDK installer.
- After installation, set the JAVA_HOME environment variable to the JDK installation path, and add the bin directory to the system PATH.

## 2. Install and Set Up MySQL:

- Visit the MySQL download page and choose the appropriate version for your operating system.
- Download the MySQL installer and follow the installation instructions.
- During installation, set a root password for MySQL.
- Start the MySQL server after installation.
- Optionally, install a MySQL GUI tool like MySQL Workbench for easier database management.

## 3. Use a Build Tool (Maven or Gradle):

## a. Maven:
- Visit the Apache Maven download page.
- Download the Maven binary zip file.
- Extract the contents to a directory on your machine.
- Add the Maven bin directory to the system PATH.
- Verify the installation by running mvn -v in the terminal.

## b. Gradle:

- Visit the Gradle download page.
- Download the Gradle binary-only distribution.
- Extract the contents to a directory on your machine.
- Add the Gradle bin directory to the system PATH.
- Verify the installation by running gradle -v in the terminal.

## 4. Clone the project
- Clone the Spring project repository from your version control system (e.g., Git)

## 5.Configure MYSQL Database
- Create a MySQL database for your project.
- Update the application.properties or application.yml file in your Spring project with the database connection details.

spring.datasource.url=jdbc:mysql://localhost:3306/maindb
spring.datasource.username=your_mysql_username
spring.datasource.password=your_mysql_password

## 6.Build the project 
- Use Maven or Gradle to build your project.

## For Maven
mvn clean install

## For Gradle
./gradlew build

## 7.Run the application
- Execute the generated JAR file or run the application from your IDE.

## 8. Access the Application
- Open a web browser and go to https://localhost:8443.

___

___

## Work Done by the Team Members

![jira1](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/145127838/79723178-4010-4ce3-8e1e-2ef6626ed946)
![jira2](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/145127838/37d07731-14c0-41ed-b7f3-115067531129)
![jira3](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/145127838/44e5c50d-97b1-442d-b252-a0e5cfd843dd)
![jira4](https://github.com/CodeURJC-DAW-2023-24/webapp10/assets/145127838/42c90891-a839-42df-934d-ea7fa08dd849)



___



  ## Phase 2 MEMBERS' PARTICIPATION
  - **Vicente Navarro Raboso**:
    In this phase I made the load more function, to display more than nine events in the bets page. I also created the singup functions to allow the user to register in the app and store their information in the data base. I made the logout function and I fixed the login that had a few errors and didn't work. I make the admin page to allow the admin to add new events where the users can make their bets. Finally I make the mustache template to show the information of the events and I added the controllers to show the templates using spring.
    My most inmportant commits:

     [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/aaaa9005310f455f7417d57694293cb21999b98d)
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/b0d1805eee686a464ab60d5aa847561fa7e24aec)  
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/e72281db46e5864b403d0acae7df468aeafb2521)  
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/d33c6c0dcd117f1f4b9331119c0565a26f83fc36)  
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/e090be907e363fe8c0cf61087ef8337d96f8324e)

    The files I worked the most:
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/service/UserSevice.java)  
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blame/develop/src/main/java/es/codeurj/mortez365/controller/AppController.java)  
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blame/develop/src/main/java/es/codeurj/mortez365/controller/EventController.java)  
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/UserController.java)  
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/security/WebSecurityConfig.java)  

  - **√Ålvaro Pindado Casti√±eira**:
    In this phase I developed the security and updated it to SpringBoot 3 and helped the rest of the team with the controllers and mustache implementation.  
    My most important commits:  
    [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/b869be16353d81762850031839ee3e4d26f34282)  
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/7f409f2d70d048c38b19bb2ac706fc3d2794a04e)  
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/9081a740f1e707c9c6726814e282c5f81e187772)  
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/d17f53e6b3531f5e92bcaa81d91561951a3b7786)  
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/befb2ea13779b402c24d795ac6960122f47de9e9)  

    The files I worked in the most:  
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/security/WebSecurityConfig.java)  
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/controller/AppController.java)  
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/resources/templates/login.html)  
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/security/RepositoryUserDetailsService.java)  
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/security/CSRFHandlerConfiguration.java)  

  - **Alberto Rold√°n Nieto**:
    In this phase I helped the rest of the team and implemented the roulette algorithm and https  
    My most important commits:  
    [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/8069106ab74e0653aa14aa89deb3447beb72aeef)
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/5ce73fe0a9d4e886852e9180c49ef527016ab785) 
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/c7fb5e3eb955de8ae696892e9684c7db05d14617)
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/5773574b4f40cb106e7b9694089d4d23efbf1448)
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/34054be3e905502a77b007f8ddc0be31a1c57848)

   
    The files I worked in the most:
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/advice/BaseControllerAdvice.java)  
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/resources/assets/js/scriptroulette.js)  
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/resources/fragments/header.html)  
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/java/es/codeurj/mortez365/controller/AppController.java)  
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/main/src/main/resources/application.properties)  
    
  - **Jos√© Villagr√°n Robles**:
    In this phase I connected the database on MySQL to the application, and also helped with the login, create
    the PDFGenerator and some little details.
    My most important commits:  
    [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/2e8cd7a33aec06720c11ce484575e3d6545eca3b)
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/d7dea2ca11ffd50fde0d8970623e8692c5773e69) 
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/f3a928148a07e8c5c8da881cbde431d455c2ab2c)
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/91aabd4b4756bad393e1f585a5673abdc6ec7053)
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/6aaade018285ffb072eca7a37644c73618205753)

    
    The files I worked in the most:
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/PDFExportController.java)  
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/MainController.java)  
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/service/PDFGeneratorService.java)  
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/model/User.java)  
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/model/Event.java)  

 - **Guillermo Romero Almazan**:
    In this phase I was in charge of the bets, how they are displayed, how to bet and how to save them, also I helped with the register and fixing some errors.
    My most important commits:  
    [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/78145be0f0f32b3d3a02a8a47630ce6fc93089ec)
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/33c7b9b8f4f4ecb75a94b0ab7877f67828c33292)
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/bdae85457ed73644d6e900c299fea9cfc8f1fef1#diff-9d3d6d342c0eb97140c741512078e2f8b5265e892d5f3850800febb86b583ec3)
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/a318818d121d2e08c06d53c00d09646ba7e13f76)
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/60f394bfa50cbf1fdaada632b22a4cc49bf2a45a#diff-94076bacca6130783ae9057d5e04863a29cc29cd6978d236b2112dd03900ae38)
    
The files I worked in the most:
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/AppController.java)  
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/model/Bet.java)  
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/resources/assets/js/scriptapuestas.js)  
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/resources/templates/single-product.html)  
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/model/Event.java)  


## Phase 3
___

  ## HOW TO DEPLOY THE WEB APPLICATION
   1. Open GlobalProtect PaloAlto VPN (the VPN of the University) and login with the credentials of the team
   2. In FileExplorer, go to the folder that contains the root folder of the application (webapp10)
   3. Paste the special key of the team (prAppWeb10.key)
   4. In the same folder (the one that contains "webapp10"), open Git Bash Here
   5. In the terminal, paste the following command: ssh -i prAppWeb10.key vmuser@10.100.139.135
   6. Now you should be in the virtual machine of the University (prompt vmuser@prappweb10)
   7. If you put the command "ls" you should see the app folder (webapp10)
   8. Execute "cd webapp10/"
   9. Execute "sudo docker-compose up -d"
   10. Now you should see both containers (webapp and database) running
   11. Finally, open the browser and search "10.100.139.135:8443". You should be able to use the web application correctly

___

  ## MEMBERS' PARTICIPATION
  - **Vicente Navarro Raboso**:
    In this phase...

    [Commit 1]
    [Commit 2] 
    [Commit 3]
    [Commit 4]
    [Commit 5]

    The files I worked the most:
    [File 1]
    [File 2] 
    [File 3]
    [File 4]
    [File 5]

  - **√Ålvaro Pindado Casti√±eira**:
    In this phase I developed the dockerfile and docker-compose files, worked in the deployment of the application and the documentation of the API Rests with swagger.
    
    [Commit 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/c70e30f85d7d9a8aece44c25abc5de6ffe493fb1)
    [Commit 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/4e6a86a9c10ccc16fe136f900bf0609a0b573cba)
    [Commit 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/0da561024fca9fc19156d9dc3b87b439bcb50bf3)
    [Commit 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/828dd0831817258f19c2375e0bf728f68497e981)
    [Commit 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/commit/0e8dd2947cac23fdd9f29a26d525770806840d49)

    The files I worked in the most:  
    [File 1](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/Dockerfile)
    [File 2](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/docker-compose.yml)
    [File 3](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/pom.xml)
    [File 4](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/EventRestController.java)
    [File 5](https://github.com/CodeURJC-DAW-2023-24/webapp10/blob/develop/src/main/java/es/codeurj/mortez365/controller/UserRestController.java)

  - **Alberto Rold√°n Nieto**:
    In this phase...
    
    [Commit 1]
    [Commit 2] 
    [Commit 3]
    [Commit 4]
    [Commit 5]

    The files I worked in the most:  
    [File 1]
    [File 2] 
    [File 3]
    [File 4]
    [File 5]
    
  - **Jos√© Villagr√°n Robles**:
    In this phase...

    [Commit 1]
    [Commit 2] 
    [Commit 3]
    [Commit 4]
    [Commit 5]

    The files I worked in the most:  
    [File 1]
    [File 2] 
    [File 3]
    [File 4]
    [File 5]

 - **Guillermo Romero Almazan**:
    In this phase...
   
    [Commit 1]
    [Commit 2] 
    [Commit 3]
    [Commit 4]
    [Commit 5]

    The files I worked in the most:  
    [File 1]
    [File 2] 
    [File 3]
    [File 4]
    [File 5]
